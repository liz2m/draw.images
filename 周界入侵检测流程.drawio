<mxfile host="app.diagrams.net" modified="2023-08-14T09:57:23.492Z" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36" etag="odkFIOYWEn5gyLy3ae4U" version="21.6.8" type="github">
  <diagram name="Page-1" id="T3Z21k5VHN_iptqrHMHW">
    <mxGraphModel dx="1434" dy="1850" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-188" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E6E6E6;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="28" y="-40" width="830" height="2240" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="360.5" y="220" as="sourcePoint" />
            <mxPoint x="437.6199999999999" y="360" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-27" value="" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;fillColor=#FFCE9F;" vertex="1" parent="1">
          <mxGeometry x="110" y="140" width="250.5" height="170" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-3" value="" style="image;points=[];aspect=fixed;html=1;align=center;shadow=0;dashed=0;image=img/lib/allied_telesis/security/POE_DVS_Camera.svg;" vertex="1" parent="1">
          <mxGeometry x="173" y="194.8" width="51" height="40.2" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-4" value="" style="image;points=[];aspect=fixed;html=1;align=center;shadow=0;dashed=0;image=img/lib/allied_telesis/security/POE_DVS_Camera.svg;" vertex="1" parent="1">
          <mxGeometry x="260" y="189.8" width="51" height="40.2" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-7" value="" style="image;points=[];aspect=fixed;html=1;align=center;shadow=0;dashed=0;image=img/lib/allied_telesis/security/POE_DVS_Camera.svg;" vertex="1" parent="1">
          <mxGeometry x="224" y="250" width="51" height="40.2" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.479;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="aJU3L4zh-oG6XwhIlIdD-11">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="436.9899999999998" y="700" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-11" value="抽帧程序（ffmpeg.alg.peinde）" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="355.25" y="543" width="164.75" height="50" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-14" value="Master/Node1/Node2" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=3;fontSize=10;fontColor=#808080;" vertex="1" parent="1">
          <mxGeometry x="355.25" y="513" width="154.75" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-20" value="RTSP 协议" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="340" y="300" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.528;entryY=-0.2;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="438.6199999999999" y="405" as="sourcePoint" />
            <mxPoint x="437.9580000000001" y="507" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-21" value="" style="image;aspect=fixed;perimeter=ellipsePerimeter;html=1;align=center;shadow=0;dashed=0;spacingTop=3;image=img/lib/active_directory/cd_dvd.svg;" vertex="1" parent="1">
          <mxGeometry x="417.62" y="365" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-92" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="aJU3L4zh-oG6XwhIlIdD-22" target="aJU3L4zh-oG6XwhIlIdD-91">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-22" value="人员检测程序（peinde.service.vai）" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="355.24" y="1158" width="164.75" height="50" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-49" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1" source="aJU3L4zh-oG6XwhIlIdD-90" target="aJU3L4zh-oG6XwhIlIdD-47">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="437.5999999999999" y="730" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-25" value="视频流" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="453" y="370" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-26" value="&lt;h1&gt;步骤&lt;/h1&gt;&lt;div&gt;1. 按指定的帧率从视频流中获取帧数据&lt;/div&gt;&lt;div&gt;2. 帧数据转化为图片数据。&lt;/div&gt;&lt;div&gt;3. 将图片数据进行压缩。&lt;/div&gt;&lt;div&gt;4. 将压缩后的图片及设备信息、时间信息封装程protobuf 传入kafka。&lt;/div&gt;&lt;div&gt;5. 由于设备连接数过多，一个抽帧程序中同时会创建多个图片压缩进程及多个kafka 客户端上传图片数据，此参数可在后台管理功能中进行配置。&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="100.25" y="570" width="270" height="180" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-36" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" target="aJU3L4zh-oG6XwhIlIdD-21">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="510" y="220" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-33" value="站点1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="30" y="210" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-34" value="站点2" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="780" y="210" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-38" value="" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;fillColor=#FFCE9F;" vertex="1" parent="1">
          <mxGeometry x="510" y="140" width="250.5" height="170" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-39" value="" style="image;points=[];aspect=fixed;html=1;align=center;shadow=0;dashed=0;image=img/lib/allied_telesis/security/POE_DVS_Camera.svg;" vertex="1" parent="1">
          <mxGeometry x="573" y="194.8" width="51" height="40.2" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-40" value="" style="image;points=[];aspect=fixed;html=1;align=center;shadow=0;dashed=0;image=img/lib/allied_telesis/security/POE_DVS_Camera.svg;" vertex="1" parent="1">
          <mxGeometry x="660" y="189.8" width="51" height="40.2" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-41" value="" style="image;points=[];aspect=fixed;html=1;align=center;shadow=0;dashed=0;image=img/lib/allied_telesis/security/POE_DVS_Camera.svg;" vertex="1" parent="1">
          <mxGeometry x="624" y="250" width="51" height="40.2" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-44" value="Protobuf 序列化后的数据" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="492.63000000000005" y="1007.5" width="180" height="25" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-45" value="Master/Node1/Node2" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=3;fontSize=10;fontColor=#CCCCCC;" vertex="1" parent="1">
          <mxGeometry x="360.24" y="1128" width="154.75" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-46" value="&lt;h1&gt;备注&lt;/h1&gt;&lt;p&gt;1. master node1 node2 都安装有抽帧程序，此程序对应后台管理中的 edge1、edge2、edge3。&lt;/p&gt;&lt;p&gt;2. 三台服务器分别承担摄像头的抽帧长连接工作。例如：1-6 摄像头 通过edge1 抽取 7-15 通过edge2 抽取。&lt;/p&gt;&lt;p&gt;3. 抽帧程序实现了有状态的负载均衡策略。即将指定的摄像头通过指定 edge 进行对应的抽取工作。&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="130.25" y="360" width="210" height="230" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-181" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="aJU3L4zh-oG6XwhIlIdD-47" target="aJU3L4zh-oG6XwhIlIdD-180">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="437.625" y="950" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-47" value="Kafka" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="355.25" y="870" width="164.75" height="50" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-48" value="" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#945DF2;gradientDirection=north;fillColor=#5A30B5;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.managed_streaming_for_kafka;" vertex="1" parent="1">
          <mxGeometry x="355.24" y="870" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-51" value="Node2" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=3;fontColor=#808080;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="470" y="870" width="50" height="20" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-53" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="540" y="835" width="20" height="120" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-54" value="" style="image;aspect=fixed;perimeter=ellipsePerimeter;html=1;align=center;shadow=0;dashed=0;spacingTop=3;image=img/lib/active_directory/database_partition_2.svg;" vertex="1" parent="1">
          <mxGeometry x="574" y="835" width="50" height="37" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-55" value="" style="image;aspect=fixed;perimeter=ellipsePerimeter;html=1;align=center;shadow=0;dashed=0;spacingTop=3;image=img/lib/active_directory/database_partition_2.svg;" vertex="1" parent="1">
          <mxGeometry x="640" y="835" width="50" height="37" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-56" value="" style="image;aspect=fixed;perimeter=ellipsePerimeter;html=1;align=center;shadow=0;dashed=0;spacingTop=3;image=img/lib/active_directory/database_partition_2.svg;" vertex="1" parent="1">
          <mxGeometry x="710.5" y="835" width="50" height="37" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-57" value="" style="image;aspect=fixed;perimeter=ellipsePerimeter;html=1;align=center;shadow=0;dashed=0;spacingTop=3;image=img/lib/active_directory/database_partition_2.svg;" vertex="1" parent="1">
          <mxGeometry x="574" y="883" width="50" height="37" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-58" value="" style="image;aspect=fixed;perimeter=ellipsePerimeter;html=1;align=center;shadow=0;dashed=0;spacingTop=3;image=img/lib/active_directory/database_partition_2.svg;" vertex="1" parent="1">
          <mxGeometry x="640" y="883" width="50" height="37" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-59" value="" style="image;aspect=fixed;perimeter=ellipsePerimeter;html=1;align=center;shadow=0;dashed=0;spacingTop=3;image=img/lib/active_directory/database_partition_2.svg;" vertex="1" parent="1">
          <mxGeometry x="711" y="883" width="50" height="37" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-60" value="" style="image;aspect=fixed;perimeter=ellipsePerimeter;html=1;align=center;shadow=0;dashed=0;spacingTop=3;image=img/lib/active_directory/database_partition_2.svg;" vertex="1" parent="1">
          <mxGeometry x="574" y="930" width="50" height="37" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-61" value="" style="image;aspect=fixed;perimeter=ellipsePerimeter;html=1;align=center;shadow=0;dashed=0;spacingTop=3;image=img/lib/active_directory/database_partition_2.svg;" vertex="1" parent="1">
          <mxGeometry x="640" y="930" width="50" height="37" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-62" value="&lt;h1&gt;备注&lt;/h1&gt;&lt;p&gt;1. Kafka 中 存储图片的主题包换 8个分区，所有摄像头的数据会根据Id的不同Hash存储到8个分区中，用于提供给后续8个不同消费者进行消费，实现负载均衡。&lt;/p&gt;&lt;p&gt;2. Kafka 中的数据会定时进行清理，目前设置的最大存储容量为200GB最大存储时间为2消失，即：满足以上条件中的一个条件，数据即会被清理。&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="80" y="780" width="210" height="230" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-63" value="主题：prod_edge_image_sence" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=3;fontColor=#808080;labelBackgroundColor=none;" vertex="1" parent="1">
          <mxGeometry x="520" y="799.5" width="240" height="34" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-65" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="530" y="500" width="20" height="120" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-68" value="" style="sketch=0;html=1;dashed=0;whitespace=wrap;fillColor=#2875E2;strokeColor=#ffffff;points=[[0.005,0.63,0],[0.1,0.2,0],[0.9,0.2,0],[0.5,0,0],[0.995,0.63,0],[0.72,0.99,0],[0.5,1,0],[0.28,0.99,0]];verticalLabelPosition=bottom;align=center;verticalAlign=top;shape=mxgraph.kubernetes.icon;prIcon=api" vertex="1" parent="1">
          <mxGeometry x="570" y="470" width="50" height="48" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-69" value="" style="sketch=0;html=1;dashed=0;whitespace=wrap;fillColor=#2875E2;strokeColor=#ffffff;points=[[0.005,0.63,0],[0.1,0.2,0],[0.9,0.2,0],[0.5,0,0],[0.995,0.63,0],[0.72,0.99,0],[0.5,1,0],[0.28,0.99,0]];verticalLabelPosition=bottom;align=center;verticalAlign=top;shape=mxgraph.kubernetes.icon;prIcon=api" vertex="1" parent="1">
          <mxGeometry x="570" y="536" width="50" height="48" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-70" value="" style="sketch=0;html=1;dashed=0;whitespace=wrap;fillColor=#2875E2;strokeColor=#ffffff;points=[[0.005,0.63,0],[0.1,0.2,0],[0.9,0.2,0],[0.5,0,0],[0.995,0.63,0],[0.72,0.99,0],[0.5,1,0],[0.28,0.99,0]];verticalLabelPosition=bottom;align=center;verticalAlign=top;shape=mxgraph.kubernetes.icon;prIcon=api" vertex="1" parent="1">
          <mxGeometry x="570" y="600" width="50" height="48" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-71" value="Master" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=3;fontColor=#808080;" vertex="1" parent="1">
          <mxGeometry x="640" y="479" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-72" value="Node1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=3;fontColor=#808080;" vertex="1" parent="1">
          <mxGeometry x="640" y="543" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-73" value="Node2" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=3;labelBackgroundColor=none;fontColor=#808080;" vertex="1" parent="1">
          <mxGeometry x="640" y="609" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-75" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="540" y="1123" width="20" height="120" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-76" value="" style="sketch=0;html=1;dashed=0;whitespace=wrap;fillColor=#2875E2;strokeColor=#ffffff;points=[[0.005,0.63,0],[0.1,0.2,0],[0.9,0.2,0],[0.5,0,0],[0.995,0.63,0],[0.72,0.99,0],[0.5,1,0],[0.28,0.99,0]];verticalLabelPosition=bottom;align=center;verticalAlign=top;shape=mxgraph.kubernetes.icon;prIcon=api" vertex="1" parent="1">
          <mxGeometry x="560" y="1095.5" width="50" height="48" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-77" value="" style="sketch=0;html=1;dashed=0;whitespace=wrap;fillColor=#2875E2;strokeColor=#ffffff;points=[[0.005,0.63,0],[0.1,0.2,0],[0.9,0.2,0],[0.5,0,0],[0.995,0.63,0],[0.72,0.99,0],[0.5,1,0],[0.28,0.99,0]];verticalLabelPosition=bottom;align=center;verticalAlign=top;shape=mxgraph.kubernetes.icon;prIcon=api" vertex="1" parent="1">
          <mxGeometry x="620" y="1095.5" width="50" height="48" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-78" value="" style="sketch=0;html=1;dashed=0;whitespace=wrap;fillColor=#2875E2;strokeColor=#ffffff;points=[[0.005,0.63,0],[0.1,0.2,0],[0.9,0.2,0],[0.5,0,0],[0.995,0.63,0],[0.72,0.99,0],[0.5,1,0],[0.28,0.99,0]];verticalLabelPosition=bottom;align=center;verticalAlign=top;shape=mxgraph.kubernetes.icon;prIcon=api" vertex="1" parent="1">
          <mxGeometry x="560" y="1158" width="50" height="48" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-79" value="" style="sketch=0;html=1;dashed=0;whitespace=wrap;fillColor=#2875E2;strokeColor=#ffffff;points=[[0.005,0.63,0],[0.1,0.2,0],[0.9,0.2,0],[0.5,0,0],[0.995,0.63,0],[0.72,0.99,0],[0.5,1,0],[0.28,0.99,0]];verticalLabelPosition=bottom;align=center;verticalAlign=top;shape=mxgraph.kubernetes.icon;prIcon=api" vertex="1" parent="1">
          <mxGeometry x="600" y="1160" width="90" height="48" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-80" value="" style="sketch=0;html=1;dashed=0;whitespace=wrap;fillColor=#2875E2;strokeColor=#ffffff;points=[[0.005,0.63,0],[0.1,0.2,0],[0.9,0.2,0],[0.5,0,0],[0.995,0.63,0],[0.72,0.99,0],[0.5,1,0],[0.28,0.99,0]];verticalLabelPosition=bottom;align=center;verticalAlign=top;shape=mxgraph.kubernetes.icon;prIcon=api" vertex="1" parent="1">
          <mxGeometry x="660" y="1159" width="90" height="48" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-81" value="" style="sketch=0;html=1;dashed=0;whitespace=wrap;fillColor=#2875E2;strokeColor=#ffffff;points=[[0.005,0.63,0],[0.1,0.2,0],[0.9,0.2,0],[0.5,0,0],[0.995,0.63,0],[0.72,0.99,0],[0.5,1,0],[0.28,0.99,0]];verticalLabelPosition=bottom;align=center;verticalAlign=top;shape=mxgraph.kubernetes.icon;prIcon=api" vertex="1" parent="1">
          <mxGeometry x="560" y="1221" width="50" height="48" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-82" value="" style="sketch=0;html=1;dashed=0;whitespace=wrap;fillColor=#2875E2;strokeColor=#ffffff;points=[[0.005,0.63,0],[0.1,0.2,0],[0.9,0.2,0],[0.5,0,0],[0.995,0.63,0],[0.72,0.99,0],[0.5,1,0],[0.28,0.99,0]];verticalLabelPosition=bottom;align=center;verticalAlign=top;shape=mxgraph.kubernetes.icon;prIcon=api" vertex="1" parent="1">
          <mxGeometry x="620" y="1221" width="50" height="48" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-83" value="" style="sketch=0;html=1;dashed=0;whitespace=wrap;fillColor=#2875E2;strokeColor=#ffffff;points=[[0.005,0.63,0],[0.1,0.2,0],[0.9,0.2,0],[0.5,0,0],[0.995,0.63,0],[0.72,0.99,0],[0.5,1,0],[0.28,0.99,0]];verticalLabelPosition=bottom;align=center;verticalAlign=top;shape=mxgraph.kubernetes.icon;prIcon=api" vertex="1" parent="1">
          <mxGeometry x="680" y="1221" width="50" height="48" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-84" value="Master" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=3;fontColor=#808080;" vertex="1" parent="1">
          <mxGeometry x="720" y="1105" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-85" value="Node1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=3;fontColor=#808080;" vertex="1" parent="1">
          <mxGeometry x="750" y="1167" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-86" value="Node2" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=3;fontColor=#808080;" vertex="1" parent="1">
          <mxGeometry x="750" y="1230" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-99" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="aJU3L4zh-oG6XwhIlIdD-87" target="aJU3L4zh-oG6XwhIlIdD-98">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-87" value="算法程序（person.alg.peinde）" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="360.5" y="1437" width="164.75" height="50" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-88" value="Master/Node1/Node2" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="360.5" y="1407" width="154.75" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-90" value="Protobuf" style="html=1;whiteSpace=wrap;strokeColor=none;fillColor=#0079D6;labelPosition=center;verticalLabelPosition=middle;verticalAlign=top;align=center;fontSize=12;outlineConnect=0;spacingTop=-6;fontColor=#FFFFFF;sketch=0;shape=mxgraph.sitemap.portfolio;" vertex="1" parent="1">
          <mxGeometry x="407.88" y="700" width="60" height="40" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-93" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="aJU3L4zh-oG6XwhIlIdD-91" target="aJU3L4zh-oG6XwhIlIdD-88">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-96" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;dashed=1;" edge="1" parent="1" source="aJU3L4zh-oG6XwhIlIdD-91" target="aJU3L4zh-oG6XwhIlIdD-95">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-91" value="" style="image;sketch=0;aspect=fixed;html=1;points=[];align=center;fontSize=12;image=img/lib/mscae/Shared_Image_Galleries.svg;" vertex="1" parent="1">
          <mxGeometry x="423" y="1291" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-94" value="图片数据" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="465" y="1291" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-95" value="minio" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="290" y="1291" width="65.24" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-97" value="持久化" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="357.62" y="1321" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-101" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="aJU3L4zh-oG6XwhIlIdD-98" target="aJU3L4zh-oG6XwhIlIdD-100">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-121" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="aJU3L4zh-oG6XwhIlIdD-98" target="aJU3L4zh-oG6XwhIlIdD-111">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-122" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="aJU3L4zh-oG6XwhIlIdD-98" target="aJU3L4zh-oG6XwhIlIdD-110">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-98" value="是否有人" style="rhombus;whiteSpace=wrap;html=1;fontStyle=3" vertex="1" parent="1">
          <mxGeometry x="403" y="1550" width="80" height="70" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-100" value="结束" style="ellipse;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="224" y="1560" width="60" height="50" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-102" value="没人" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=3" vertex="1" parent="1">
          <mxGeometry x="315.24" y="1560" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-196" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="aJU3L4zh-oG6XwhIlIdD-110" target="aJU3L4zh-oG6XwhIlIdD-114">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-110" value="通知流程" style="rounded=1;whiteSpace=wrap;html=1;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="460" y="1715" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-125" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="aJU3L4zh-oG6XwhIlIdD-111" target="aJU3L4zh-oG6XwhIlIdD-124">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-126" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="aJU3L4zh-oG6XwhIlIdD-111" target="aJU3L4zh-oG6XwhIlIdD-116">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-111" value="持久化流程" style="rounded=1;whiteSpace=wrap;html=1;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="325" y="1715" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-130" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="aJU3L4zh-oG6XwhIlIdD-114" target="aJU3L4zh-oG6XwhIlIdD-127">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-114" value="MQTT" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="570" y="1777.25" width="164.75" height="50" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-155" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="aJU3L4zh-oG6XwhIlIdD-116" target="aJU3L4zh-oG6XwhIlIdD-154">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-116" value="Mariadb" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="390" y="1820" width="50" height="130" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-153" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="aJU3L4zh-oG6XwhIlIdD-124" target="aJU3L4zh-oG6XwhIlIdD-132">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-124" value="Minio" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="307.62" y="1820" width="50" height="130" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-194" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.75;entryDx=0;entryDy=0;" edge="1" parent="1" source="aJU3L4zh-oG6XwhIlIdD-127" target="aJU3L4zh-oG6XwhIlIdD-164">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-127" value="前端报警" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="560" y="1867" width="50" height="130" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-184" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="aJU3L4zh-oG6XwhIlIdD-128" target="aJU3L4zh-oG6XwhIlIdD-158">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-128" value="报警设备" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="719.01" y="2020" width="50" height="130" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-132" value="结束" style="ellipse;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="302.62" y="2010" width="60" height="50" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-133" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="547.88" y="1402" width="20" height="120" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-136" value="" style="shape=image;html=1;verticalAlign=top;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;imageAspect=0;aspect=fixed;image=https://cdn2.iconfinder.com/data/icons/competitive-strategy-and-corporate-training/512/746_Algorithm_business_foretelling_pattern_plan_Business_Management-128.png" vertex="1" parent="1">
          <mxGeometry x="574" y="1377" width="60" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-137" value="" style="shape=image;html=1;verticalAlign=top;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;imageAspect=0;aspect=fixed;image=https://cdn2.iconfinder.com/data/icons/competitive-strategy-and-corporate-training/512/746_Algorithm_business_foretelling_pattern_plan_Business_Management-128.png" vertex="1" parent="1">
          <mxGeometry x="641" y="1377" width="60" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-138" value="" style="shape=image;html=1;verticalAlign=top;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;imageAspect=0;aspect=fixed;image=https://cdn2.iconfinder.com/data/icons/competitive-strategy-and-corporate-training/512/746_Algorithm_business_foretelling_pattern_plan_Business_Management-128.png" vertex="1" parent="1">
          <mxGeometry x="706" y="1377" width="60" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-139" value="" style="shape=image;html=1;verticalAlign=top;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;imageAspect=0;aspect=fixed;image=https://cdn2.iconfinder.com/data/icons/competitive-strategy-and-corporate-training/512/746_Algorithm_business_foretelling_pattern_plan_Business_Management-128.png" vertex="1" parent="1">
          <mxGeometry x="574" y="1437" width="60" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-140" value="" style="shape=image;html=1;verticalAlign=top;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;imageAspect=0;aspect=fixed;image=https://cdn2.iconfinder.com/data/icons/competitive-strategy-and-corporate-training/512/746_Algorithm_business_foretelling_pattern_plan_Business_Management-128.png" vertex="1" parent="1">
          <mxGeometry x="640" y="1437" width="60" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-141" value="" style="shape=image;html=1;verticalAlign=top;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;imageAspect=0;aspect=fixed;image=https://cdn2.iconfinder.com/data/icons/competitive-strategy-and-corporate-training/512/746_Algorithm_business_foretelling_pattern_plan_Business_Management-128.png" vertex="1" parent="1">
          <mxGeometry x="706" y="1437" width="60" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-142" value="" style="shape=image;html=1;verticalAlign=top;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;imageAspect=0;aspect=fixed;image=https://cdn2.iconfinder.com/data/icons/competitive-strategy-and-corporate-training/512/746_Algorithm_business_foretelling_pattern_plan_Business_Management-128.png" vertex="1" parent="1">
          <mxGeometry x="574" y="1497" width="60" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-143" value="" style="shape=image;html=1;verticalAlign=top;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;imageAspect=0;aspect=fixed;image=https://cdn2.iconfinder.com/data/icons/competitive-strategy-and-corporate-training/512/746_Algorithm_business_foretelling_pattern_plan_Business_Management-128.png" vertex="1" parent="1">
          <mxGeometry x="640" y="1492" width="60" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-144" value="" style="shape=image;html=1;verticalAlign=top;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;imageAspect=0;aspect=fixed;image=https://cdn2.iconfinder.com/data/icons/competitive-strategy-and-corporate-training/512/746_Algorithm_business_foretelling_pattern_plan_Business_Management-128.png" vertex="1" parent="1">
          <mxGeometry x="710.5" y="1497" width="60" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-145" value="Master" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=3;fontColor=#808080;" vertex="1" parent="1">
          <mxGeometry x="766" y="1402" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-146" value="Node1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=3;fontColor=#808080;" vertex="1" parent="1">
          <mxGeometry x="766" y="1457" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-147" value="Node2" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1;fontColor=#808080;" vertex="1" parent="1">
          <mxGeometry x="766" y="1512" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-148" value="&lt;h1&gt;备注&lt;/h1&gt;&lt;p&gt;1. 系统中包含有8个人员检测程序，分别对应Kafka 中的 8个分区数据进行消费。&lt;/p&gt;&lt;p&gt;2. 人员检测程序解析protobuf 数据，并将图片传输到算法程序进行处理。&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="74" y="1095.5" width="206" height="154.5" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-149" value="&lt;h1&gt;备注&lt;/h1&gt;&lt;p&gt;1. 每个节点上都会创建3个算法进程独立工作。3个节点共创建 9个算法进程。&lt;/p&gt;&lt;p&gt;2.9个算法进程实现了无状态负载均衡即 每个算法进程都可以通过Nacos 调度为 人员检测程序提供检测能力。&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="80" y="1377" width="206" height="154.5" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-154" value="结束" style="ellipse;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="385" y="2010" width="60" height="50" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-158" value="结束" style="ellipse;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="552.63" y="2060" width="60" height="50" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-162" value="&lt;h1&gt;持久化流程&lt;/h1&gt;&lt;p&gt;1. 将检测图片数据保存到minio。&lt;/p&gt;&lt;p&gt;2. 同时会录制一段 10s 的视频保存到minio 中。&lt;/p&gt;&lt;p&gt;3. 将检测记录保存到数据库。&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="50" y="1710" width="206" height="154.5" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-163" value="&lt;h1&gt;通知流程&lt;/h1&gt;&lt;p&gt;1. 将通知记录发送到MQTT。&lt;/p&gt;&lt;p&gt;2. web 浏览器通过订阅MQTT 的报警通知设备进行报警。&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="50" y="1870" width="206" height="154.5" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-166" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="aJU3L4zh-oG6XwhIlIdD-164" target="aJU3L4zh-oG6XwhIlIdD-128">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-164" value="报警服务&lt;br&gt;(voice-notice.service.vai)" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="661.64" y="1894" width="164.75" height="50" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-168" value="Master" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=3;fontColor=#808080;" vertex="1" parent="1">
          <mxGeometry x="598.5" y="1870" width="154.75" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-170" value="" style="outlineConnect=0;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;shape=mxgraph.aws3.mqtt_protocol;fillColor=#5294CF;gradientColor=none;" vertex="1" parent="1">
          <mxGeometry x="571.5" y="1777.25" width="27" height="20" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-171" value="" style="image;sketch=0;aspect=fixed;html=1;points=[];align=center;fontSize=12;image=img/lib/mscae/Docker.svg;" vertex="1" parent="1">
          <mxGeometry x="362.62" y="1437" width="28.05" height="23" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-172" value="" style="image;sketch=0;aspect=fixed;html=1;points=[];align=center;fontSize=12;image=img/lib/mscae/Docker.svg;" vertex="1" parent="1">
          <mxGeometry x="356.95" y="1160" width="28.05" height="23" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-173" value="" style="image;sketch=0;aspect=fixed;html=1;points=[];align=center;fontSize=12;image=img/lib/mscae/Docker.svg;" vertex="1" parent="1">
          <mxGeometry x="356.95" y="543" width="28.05" height="23" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-176" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="aJU3L4zh-oG6XwhIlIdD-174" target="aJU3L4zh-oG6XwhIlIdD-27">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-177" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="aJU3L4zh-oG6XwhIlIdD-174" target="aJU3L4zh-oG6XwhIlIdD-38">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-174" value="开始" style="ellipse;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="413" y="30" width="60" height="50" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-182" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1" source="aJU3L4zh-oG6XwhIlIdD-180" target="aJU3L4zh-oG6XwhIlIdD-45">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="437.615" y="1087" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-180" value="Protobuf" style="html=1;whiteSpace=wrap;strokeColor=none;fillColor=#0079D6;labelPosition=center;verticalLabelPosition=middle;verticalAlign=top;align=center;fontSize=12;outlineConnect=0;spacingTop=-6;fontColor=#FFFFFF;sketch=0;shape=mxgraph.sitemap.portfolio;" vertex="1" parent="1">
          <mxGeometry x="407.62" y="1000" width="60" height="40" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-185" value="" style="image;sketch=0;aspect=fixed;html=1;points=[];align=center;fontSize=12;image=img/lib/mscae/Docker.svg;" vertex="1" parent="1">
          <mxGeometry x="661.95" y="1894" width="28.05" height="23" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-187" value="有人" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=3" vertex="1" parent="1">
          <mxGeometry x="440" y="1630" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-189" value="" style="html=1;verticalLabelPosition=bottom;align=center;labelBackgroundColor=#ffffff;verticalAlign=top;strokeWidth=2;strokeColor=#0080F0;shadow=0;dashed=0;shape=mxgraph.ios7.icons.data;" vertex="1" parent="1">
          <mxGeometry x="391.55" y="1822" width="16.33" height="20" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-191" value="" style="image;aspect=fixed;html=1;points=[];align=center;fontSize=12;image=img/lib/azure2/general/Media_File.svg;" vertex="1" parent="1">
          <mxGeometry x="309" y="1821" width="16.25" height="20" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-212" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="470" y="683.5" width="20" height="73" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-213" value="二进制图片数据" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="497" y="670" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-214" value="设备信息" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="477" y="705" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aJU3L4zh-oG6XwhIlIdD-215" value="时间信息" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="480" y="735" width="90" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
